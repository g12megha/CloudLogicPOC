'use strict';

var url = require('url');

module.exports = {
  getWelcomeFile: function(req) {
    var tracer = req.loggingContext.getTracer();
    var welcomeFile = req.app.get('routerConfig').appConfig.welcomeFile;
    if (/^\/(\?.*$)?$/.test(req.url) && welcomeFile) {
      tracer.info('Incoming request: "%s" will be redirected to "%s"', req.url, welcomeFile);
      var search = url.parse(req.url).search;
      if (search) {
        return welcomeFile + search;
      } else {
        return welcomeFile;
      }
    }
    return;
  }
};
